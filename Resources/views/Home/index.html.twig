{% extends frontend() %}

{% block javascripts %}
{{ parent() }}

<script type="text/javascript" src="{{ asset('bundles/mobilecartfrontend/js/typeahead.bundle.min.js') }}"></script>
<script type="text/javascript">
    $(function() {

        var pagerForm = $('#pager-form');
        var textInput = $('input#text-search');

        // fulltext search-query
        textInput.keypress(function(e){
            // todo : auto search
            if (e.which == 13) {
                pagerForm.submit();
            }
        });

        var searchURL = "{{ path('cart_products') }}" + "?format=json&q=%QUERY";
        var engine = new Bloodhound({
            remote: {
                url: searchURL,
                wildcard: '%QUERY',
                transform: function(response) {
                    return response.result.entities;
                }
            },
            identify: function(obj) {
                return obj.id;
            },
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            datumTokenizer: Bloodhound.tokenizers.whitespace
        });

        $('input.typeahead').typeahead({
                    minLength: 2,
                    highlight: true
                },
                {
                    name: 'products',
                    display: 'name',
                    displayKey: 'name',
                    source: engine
                }
        );
    });
</script>
{% endblock %}

{% block content %}

<div class="container">

    <form id="pager-form" action="{{ path('cart_products') }}">
    {% include templatePath('Shared:header-bar.html.twig') %}
    </form>

    <div class="row">
        <div class="col-md-12">
            <div class="row carousel-holder">

                <div class="col-md-12">
                    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                            <li data-target="#carousel-example-generic" data-slide-to="1" class=""></li>
                            <li data-target="#carousel-example-generic" data-slide-to="2" class=""></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="item active">
                                <img class="slide-image" src="{{ asset('bundles/mobilecartfrontend/images/800x300.gif') }}" alt="">
                            </div>
                            <div class="item">
                                <img class="slide-image" src="{{ asset('bundles/mobilecartfrontend/images/800x300.gif') }}" alt="">
                            </div>
                            <div class="item">
                                <img class="slide-image" src="{{ asset('bundles/mobilecartfrontend/images/800x300.gif') }}" alt="">
                            </div>
                        </div>
                        <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left"></span>
                        </a>
                        <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right"></span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
